<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SAYGEX PRO MAX - ƒê·∫∂T L·ªäCH & ƒê√ÅNH GI√Å</title>
    <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;600;900&display=swap" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.5.1/dist/confetti.browser.min.js"></script>
    <style>
        /* --- CSS CHUNG --- */
        :root { --primary: #ff4757; --gold: #ffa502; --dark: #1e272e; --glass: rgba(255, 255, 255, 0.05); }
        body { font-family: 'Montserrat', sans-serif; background: #0f1418; color: white; padding: 20px; margin: 0; }
        
        h1, h2, h3 { margin: 0; }
        .container { max-width: 1100px; margin: 0 auto; }
        
        /* --- HEADER & G√ìI D·ªäCH V·ª§ --- */
        header { text-align: center; margin-bottom: 40px; padding-top: 20px; }
        .logo { font-size: 3rem; font-weight: 900; background: linear-gradient(to right, #fff, #bdc3c7); -webkit-background-clip: text; -webkit-text-fill-color: transparent; }
        
        .grid-packages { display: grid; grid-template-columns: repeat(auto-fit, minmax(220px, 1fr)); gap: 20px; margin-bottom: 50px; }
        .pkg-card { background: var(--glass); border: 1px solid rgba(255,255,255,0.1); border-radius: 15px; padding: 20px; text-align: center; transition: 0.3s; }
        .pkg-card:hover { border-color: var(--gold); transform: translateY(-5px); }
        .pkg-price { font-size: 2.5rem; font-weight: 900; color: var(--gold); margin: 15px 0; }
        .btn-buy { width: 100%; padding: 12px; border-radius: 25px; border: none; font-weight: bold; cursor: pointer; background: white; color: #333; }

        /* --- PH·∫¶N NH√ÇN VI√äN (M·ªöI) --- */
        .staff-section-title { text-align: center; text-transform: uppercase; margin: 50px 0 30px; font-size: 2rem; border-bottom: 2px solid var(--primary); display: inline-block; }
        .staff-container { display: flex; flex-direction: column; gap: 30px; }
        
        .staff-card { background: #1e252b; border-radius: 20px; overflow: hidden; border: 1px solid #333; }
        
        /* B·ªë c·ª•c Tr√™n: ·∫¢nh + Info */
        .staff-profile { display: flex; flex-wrap: wrap; border-bottom: 1px solid #333; }
        .staff-left { width: 200px; padding: 20px; text-align: center; background: rgba(0,0,0,0.2); flex-shrink: 0; border-right: 1px solid #333; display: flex; flex-direction: column; align-items: center; justify-content: center;}
        .staff-avatar { width: 120px; height: 120px; border-radius: 50%; object-fit: cover; border: 3px solid var(--gold); margin-bottom: 10px; }
        .staff-name { font-size: 1.2rem; font-weight: 900; color: var(--primary); text-transform: uppercase; }
        
        .staff-right { flex: 1; padding: 20px; }
        .staff-bio { font-size: 0.95rem; line-height: 1.6; color: #bdc3c7; }
        
        /* B·ªë c·ª•c D∆∞·ªõi: ƒê√°nh gi√° & Comment */
        .staff-review-area { padding: 20px; background: rgba(0,0,0,0.1); }
        .rating-summary { margin-bottom: 15px; padding: 10px; background: rgba(255,255,255,0.05); border-radius: 10px; display: flex; justify-content: space-between; align-items: center; }
        .stars-display { color: var(--gold); font-size: 1.2rem; }
        
        /* Form b√¨nh lu·∫≠n */
        .comment-form { display: flex; gap: 10px; margin-top: 15px; flex-wrap: wrap; }
        .inp-cmt-name { width: 150px; padding: 10px; border-radius: 5px; border: 1px solid #555; background: #222; color: white; }
        .inp-cmt-text { flex: 1; padding: 10px; border-radius: 5px; border: 1px solid #555; background: #222; color: white; min-width: 200px; }
        .btn-cmt { background: var(--primary); color: white; border: none; padding: 10px 20px; border-radius: 5px; cursor: pointer; font-weight: bold; }
        
        /* List b√¨nh lu·∫≠n */
        .comment-list { margin-top: 15px; max-height: 200px; overflow-y: auto; }
        .cmt-item { padding: 10px; border-bottom: 1px solid rgba(255,255,255,0.05); font-size: 0.9rem; }
        .cmt-user { font-weight: bold; color: var(--gold); }
        .cmt-content { color: #ecf0f1; margin-left: 5px; }

        /* N√∫t sao ƒë√°nh gi√° */
        .star-btn { cursor: pointer; font-size: 1.5rem; color: #555; transition: 0.2s; background: none; border: none; padding: 0 2px; }
        .star-btn.active { color: var(--gold); }
        .star-btn:hover { transform: scale(1.2); }

        /* Responsive Mobile */
        @media (max-width: 600px) {
            .staff-profile { flex-direction: column; }
            .staff-left { width: 100%; border-right: none; border-bottom: 1px solid #333; box-sizing: border-box; }
            .inp-cmt-name { width: 100%; }
        }

        /* Modal & Table Th·ªëng k√™ (Gi·ªØ nguy√™n t·ª´ code c≈©) */
        .stats-box { margin-top: 50px; background: #1e252b; padding: 20px; border-radius: 15px; border: 1px dashed #555; }
        .stats-table { width: 100%; border-collapse: collapse; margin-top: 10px; font-size: 0.9rem; }
        .stats-table th, .stats-table td { padding: 10px; border-bottom: 1px solid #444; text-align: left; }
        .modal { display: none; position: fixed; inset: 0; background: rgba(0,0,0,0.9); z-index: 999; justify-content: center; align-items: center; }
        .modal-content { background: white; color: #333; width: 90%; max-width: 450px; border-radius: 20px; padding: 30px; }
        .full-inp { width: 100%; padding: 10px; margin: 5px 0; border: 1px solid #ccc; border-radius: 5px; box-sizing: border-box; }
    </style>
</head>
<body>

    <div class="container">
        <header>
            <h1 class="logo">SAYGEX PRO MAX</h1>
            <p style="color:#7f8c8d">H·ªá th·ªëng ƒë·∫∑t l·ªãch & ƒê√°nh gi√° nh√¢n vi√™n</p>
        </header>

        <div class="grid-packages">
            <div class="pkg-card"><h3>BASIC</h3><div class="pkg-price">199K</div><button class="btn-buy" onclick="openBooking('BASIC', 199)">ƒê·∫∂T G√ìI</button></div>
            <div class="pkg-card"><h3>VIP</h3><div class="pkg-price">299K</div><button class="btn-buy" onclick="openBooking('VIP', 299)">ƒê·∫∂T G√ìI</button></div>
            <div class="pkg-card"><h3>PREMIUM</h3><div class="pkg-price">399K</div><button class="btn-buy" onclick="openBooking('PREMIUM', 399)">ƒê·∫∂T G√ìI</button></div>
            <div class="pkg-card"><h3>ULTIMATE</h3><div class="pkg-price">499K</div><button class="btn-buy" onclick="openBooking('ULTIMATE', 499)">ƒê·∫∂T G√ìI</button></div>
        </div>

        <div style="text-align: center;"><h2 class="staff-section-title">‚≠ê ƒê·ªòI NG≈® SAYGEX ‚≠ê</h2></div>
        <div class="staff-container" id="staffContainer">
            </div>

        <div class="stats-box">
            <h3 style="color:var(--gold)">üìä L·ªäCH S·ª¨ ƒê∆†N H√ÄNG C·ª¶A B·∫†N</h3>
            <table class="stats-table">
                <thead><tr><th>T√™n</th><th>G√≥i</th><th>T·ªïng</th><th>Th·ªùi gian</th></tr></thead>
                <tbody id="statsBody"></tbody>
            </table>
            <button onclick="clearHistory()" style="margin-top:10px; color:#e74c3c; background:none; border:none; cursor:pointer; text-decoration:underline">X√≥a l·ªãch s·ª≠ ƒë∆°n</button>
        </div>
    </div>

    <div id="bookingModal" class="modal">
        <div class="modal-content">
            <h2 style="margin-top:0">ƒê·∫∂T G√ìI <span id="mPkgName" style="color:red"></span></h2>
            <input type="text" id="mName" class="full-inp" placeholder="T√™n c·ªßa b·∫°n...">
            <div style="display:flex; gap:10px">
                <input type="date" id="mDate" class="full-inp">
                <input type="time" id="mTime" class="full-inp">
            </div>
            <select id="mStaff" class="full-inp">
                <option value="0">Ch·ªçn nh√¢n vi√™n (ƒê·∫øn b∆∞·ªõc sau)...</option>
            </select>
            <button class="btn-buy" style="background:#2d3436; color:white; margin-top:15px" onclick="confirmBooking()">X√ÅC NH·∫¨N & COPY</button>
            <button onclick="document.getElementById('bookingModal').style.display='none'" style="width:100%; border:none; background:none; margin-top:10px; cursor:pointer">ƒê√≥ng</button>
        </div>
    </div>

    <script>
        // --- 1. D·ªÆ LI·ªÜU NH√ÇN VI√äN (7 NG∆Ø·ªúI) ---
        // B·∫°n thay ƒë·ªïi link ·∫£nh v√† th√¥ng tin ·ªü ƒë√¢y nh√©
        const staffList = [
            { id: 1, name: "Tu·∫•n kh·ªâ", role: "nh√¢n vi√™n", img: "https://thanhnien.mediacdn.vn/uploaded/phanthuong/2020_05_06/71_FQIO.jpg?width=500", bio: "12cm, nhi·ªát t√¨nh, sung s·ª©c. l√† m·ªôt trong nh·ªØng √¥ng b·ªë ƒë∆°n th√¢n ƒë∆∞·ª£c book nhi·ªÅu nh·∫•t" },
            { id: 2, name: "ƒê·∫±ng", role: "nh√¢n vi√™n ∆∞u t√∫", img: "https://www.rawpixel.com/image/2318670/free-illustration-png-down-syndrome-t-shirt-mockup-disability", bio: "20cm, hƒÉng, m·∫°nh, m√°y d·∫≠p. √¥ng b·ªë ƒë∆°n th√¢n tuy·ªát v·ªùi nh·∫•t c·ªßa d·ªãch v·ª•" },
            { id: 3, name: "Kh√¥n l√†ng", role: "nh√¢n vi√™n", img: "https://i.pravatar.cc/400?img=50", bio: "8cm, Ho·∫°t ng√¥n, vui t√≠nh, chuy√™n khu·∫•y ƒë·ªông phong tr√†o c√°c bu·ªïi ti·ªác." },
            { id: 4, name: "Ki√™n", role: "ch·ªß", img: "https://www.housing.org.uk/globalassets/images/blogauthors/sam-higgins.png?width=400&mode=crop&heightratio=1", bio: "ƒë√£ c·∫Øt, ph·ª•c v·ª• t·∫≠n t√¢m, ch·ªß ti·ªác, th√¢n thi·ªán, nhanh nh·∫πn" },
            { id: 5, name: "H·ªën l√≤i", role: "r·ª≠a ƒë√≠t thu√™", img: "https://x.com/brentalfloss/status/1124705157437063170", bio: "36cm, c·ª±c to, c·ª±c ƒëi√™n, l√†m theo y√™u c·∫ßu" },
            { id: 6, name: "√¥ng n·ªôi", role: "nh√¢n vi√™n", img: "https://pbs.twimg.com/profile_images/1219094562838204416/IeapBwFN_400x400.jpg", bio: "16cm, l√≠nh h·∫£i qu√¢n, s·ª©c kh·ªèe t·ªët, √¥ng b·ªë gi√† ." },
            { id: 7, name: "h√πng h√≥i", role: "nh√¢n vi√™n", img: "https://pbs.twimg.com/profile_images/1800529032242409472/1sLQzmCT.jpg", bio: "1cm, M·ªõi gia nh·∫≠p nh∆∞ng r·∫•t nhi·ªát huy·∫øt, lu√¥n l·∫Øng nghe √Ω ki·∫øn kh√°ch h√†ng." }
        ];

        // --- 2. KH·ªûI T·∫†O D·ªÆ LI·ªÜU ---
        const STAFF_KEY = 'saygex_staff_data_v2';
        const ORDER_KEY = 'saygex_orders_v2';
        
        let staffData = JSON.parse(localStorage.getItem(STAFF_KEY)) || {};
        let orderHistory = JSON.parse(localStorage.getItem(ORDER_KEY)) || [];

        // ƒê·∫£m b·∫£o c·∫•u tr√∫c d·ªØ li·ªáu cho m·ªói nh√¢n vi√™n
        staffList.forEach(s => {
            if (!staffData[s.id]) {
                staffData[s.id] = { totalStars: 0, reviews: 0, comments: [] };
            }
        });

        // --- 3. RENDER GIAO DI·ªÜN NH√ÇN VI√äN ---
        function renderStaff() {
            const container = document.getElementById('staffContainer');
            container.innerHTML = "";

            staffList.forEach(s => {
                const data = staffData[s.id];
                // T√≠nh ƒëi·ªÉm trung b√¨nh
                const avg = data.reviews === 0 ? 5 : (data.totalStars / data.reviews).toFixed(1);
                
                // T·∫°o HTML cho t·ª´ng ng∆∞·ªùi
                const card = document.createElement('div');
                card.className = 'staff-card';
                card.innerHTML = `
                    <div class="staff-profile">
                        <div class="staff-left">
                            <img src="${s.img}" class="staff-avatar">
                            <div class="staff-name">${s.name}</div>
                            <div style="font-size:0.8rem; color:#777">(${s.role})</div>
                        </div>
                        <div class="staff-right">
                            <h3 style="color:var(--gold)">GI·ªöI THI·ªÜU</h3>
                            <p class="staff-bio">${s.bio}</p>
                        </div>
                    </div>
                    <div class="staff-review-area">
                        <div class="rating-summary">
                            <div>
                                <span style="font-size:1.5rem; font-weight:900; color:var(--gold)">${avg}/5</span> 
                                <span style="color:#aaa; font-size:0.9rem">(${data.reviews} l∆∞·ª£t ƒë√°nh gi√°)</span>
                            </div>
                            <div>
                                ƒê√°nh gi√° ngay: 
                                ${[1,2,3,4,5].map(i => `<button class="star-btn" onclick="rateStaff(${s.id}, ${i})">‚òÖ</button>`).join('')}
                            </div>
                        </div>

                        <div class="comment-list" id="cmt-list-${s.id}">
                            ${data.comments.length === 0 ? '<div style="color:#555; font-style:italic">Ch∆∞a c√≥ b√¨nh lu·∫≠n n√†o...</div>' : 
                              data.comments.map(c => `<div class="cmt-item"><span class="cmt-user">${c.user}:</span> <span class="cmt-content">${c.text}</span></div>`).join('')}
                        </div>
                        
                        <div class="comment-form">
                            <input type="text" id="name-${s.id}" class="inp-cmt-name" placeholder="T√™n b·∫°n...">
                            <input type="text" id="text-${s.id}" class="inp-cmt-text" placeholder="Nh·∫≠n x√©t v·ªÅ ${s.name}...">
                            <button class="btn-cmt" onclick="addComment(${s.id})">G·ª≠i</button>
                        </div>
                    </div>
                `;
                container.appendChild(card);
            });
        }

        // --- 4. CH·ª®C NƒÇNG ƒê√ÅNH GI√Å & B√åNH LU·∫¨N ---
        function rateStaff(id, stars) {
            staffData[id].totalStars += stars;
            staffData[id].reviews += 1;
            saveStaffData();
            renderStaff();
            confetti({ particleCount: 50, spread: 50, origin: { y: 0.7 } });
            alert(`C·∫£m ∆°n b·∫°n ƒë√£ ƒë√°nh gi√° ${stars} sao!`);
        }

        function addComment(id) {
            const nameInp = document.getElementById(`name-${id}`);
            const textInp = document.getElementById(`text-${id}`);
            const name = nameInp.value.trim() || "Kh√°ch ·∫©n danh";
            const text = textInp.value.trim();

            if (!text) return alert("Vui l√≤ng nh·∫≠p n·ªôi dung!");

            staffData[id].comments.unshift({ user: name, text: text }); // Th√™m v√†o ƒë·∫ßu danh s√°ch
            saveStaffData();
            renderStaff();
        }

        function saveStaffData() {
            localStorage.setItem(STAFF_KEY, JSON.stringify(staffData));
        }

        // --- 5. CH·ª®C NƒÇNG ƒê·∫∂T L·ªäCH (C≈®) ---
        let currentPkg = "", currentPrice = 0;

        function openBooking(pkg, price) {
            currentPkg = pkg; currentPrice = price;
            document.getElementById('mPkgName').innerText = pkg;
            
            // C·∫≠p nh·∫≠t danh s√°ch nh√¢n vi√™n v√†o dropdown
            const select = document.getElementById('mStaff');
            select.innerHTML = '<option value="0">Ng·∫´u nhi√™n (Free)</option>';
            staffList.forEach(s => {
                select.innerHTML += `<option value="50">${s.name} (+50k)</option>`;
            });

            document.getElementById('bookingModal').style.display = 'flex';
        }

        function confirmBooking() {
            const name = document.getElementById('mName').value;
            const date = document.getElementById('mDate').value;
            const time = document.getElementById('mTime').value;
            const staffFee = parseInt(document.getElementById('mStaff').value);
            
            if(!name || !date || !time) return alert("Vui l√≤ng ƒëi·ªÅn ƒë·ªß th√¥ng tin!");

            let total = currentPrice + staffFee;
            if (new Date(date).getDay() === 6) total = total * 0.5; // Gi·∫£m gi√° th·ª© 7

            const order = {
                name: name, pkg: currentPkg, total: total + "K", time: time + " " + date,
                timestamp: new Date().toLocaleString()
            };

            // L∆∞u l·ªãch s·ª≠
            orderHistory.push(order);
            localStorage.setItem(ORDER_KEY, JSON.stringify(orderHistory));
            renderHistory();

            // Copy
            const msg = `üì¢ ƒê∆†N SAYGEX:\n- Kh√°ch: ${name}\n- G√≥i: ${currentPkg}\n- T·ªïng: ${total}K\n- H·∫πn: ${time} ${date}`;
            const el = document.createElement('textarea');
            el.value = msg;
            document.body.appendChild(el);
            el.select();
            document.execCommand('copy');
            document.body.removeChild(el);

            alert("ƒê√£ l∆∞u ƒë∆°n & Copy! Chuy·ªÉn qua Facebook ngay...");
            window.open("https://www.facebook.com/nguyen.duc.kien.30082", "_blank");
            document.getElementById('bookingModal').style.display = 'none';
        }

        function renderHistory() {
            const tbody = document.getElementById('statsBody');
            if(orderHistory.length === 0) { tbody.innerHTML = '<tr><td colspan="4" style="text-align:center">Ch∆∞a c√≥ ƒë∆°n...</td></tr>'; return; }
            tbody.innerHTML = orderHistory.slice().reverse().map(o => `
                <tr><td>${o.name}</td><td>${o.pkg}</td><td style="color:#f1c40f; font-weight:bold">${o.total}</td><td>${o.time}</td></tr>
            `).join('');
        }
        
        function clearHistory() {
            if(confirm("X√≥a s·∫°ch l·ªãch s·ª≠ ƒë∆°n h√†ng?")) {
                localStorage.removeItem(ORDER_KEY);
                orderHistory = [];
                renderHistory();
            }
        }

        // CH·∫†Y KHI M·ªû WEB
        window.onload = function() {
            renderStaff();
            renderHistory();
        };
    </script>
</body>
</html>
